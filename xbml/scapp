rm -rf /home/scapp            >/dev/null 2>&1
rm -rf /root/scapp            >/dev/null 2>&1
#IP=`curl -s http://xbaicai.net/getip/`;
IP=`wget http://members.3322.org/dyndns/getip -O - -q ; echo`;
sleep 3
XBML='https://cdn.jsdelivr.net/gh/lingyia/OpenVPN/xbml';
app_key="0542fa6e2f2de6bb5f3a7813ded625ab_123";
source /etc/openvpn/lsgl.cfg >/dev/null 2>&1
cd /home/
yum install -y java           >/dev/null 2>&1
curl -O ${XBML}/android.zip >/dev/null 2>&1
unzip android.zip >/dev/null 2>&1 && rm -f android.zip
\cp -rf xbml-yd-old.ovpn       ./android/assets/移动常规类型.ovpn
\cp -rf xbml-yd-udp53.ovpn     ./android/assets/移动全国53UDP.ovpn
\cp -rf xbml-yd-udp138.ovpn    ./android/assets/移动全国138UDP.ovpn
\cp -rf xbml-yd-udp137.ovpn    ./android/assets/移动全国137UDP.ovpn
\cp -rf xbml-yd-136.ovpn       ./android/assets/移动全国136.ovpn
\cp -rf xbml-yd-137.ovpn       ./android/assets/移动全国137.ovpn
\cp -rf xbml-yd-138.ovpn       ./android/assets/移动全国138.ovpn
\cp -rf xbml-yd-138②.ovpn      ./android/assets/移动全国138②.ovpn
\cp -rf xbml-yd-mg138.ovpn     ./android/assets/移动咪咕138.ovpn
\cp -rf xbml-yd-139.ovpn       ./android/assets/移动全国139.ovpn
\cp -rf xbml-yd-mm.ovpn        ./android/assets/移动全国MM.ovpn
\cp -rf xbml-yd-zj①.ovpn       ./android/assets/浙江移动1.ovpn
\cp -rf xbml-yd-zj②.ovpn       ./android/assets/浙江移动2.ovpn
\cp -rf xbml-yd-zj③.ovpn       ./android/assets/浙江移动3.ovpn
\cp -rf xbml-yd-js.ovpn        ./android/assets/江苏移动.ovpn
\cp -rf xbml-yd-old-366.ovpn   ./android/assets/移动366类型.ovpn
\cp -rf xbml-yd-old-351.ovpn   ./android/assets/移动351类型.ovpn
\cp -rf xbml-yd-fj.ovpn        ./android/assets/福建移动.ovpn
\cp -rf xbml-yd-gs.ovpn        ./android/assets/甘肃移动1.ovpn
\cp -rf xbml-yd-gs2.ovpn       ./android/assets/甘肃移动2.ovpn
\cp -rf xbml-yd-gs3.ovpn       ./android/assets/甘肃移动3.ovpn
\cp -rf xbml-yd-gs4.ovpn       ./android/assets/甘肃移动4.ovpn
\cp -rf xbml-yd-hn.ovpn        ./android/assets/河南移动.ovpn
\cp -rf xbml-yd-hb.ovpn        ./android/assets/湖北移动.ovpn
\cp -rf xbml-yd-gdsz1.ovpn     ./android/assets/广东深圳1.ovpn
\cp -rf xbml-yd-gdsz2.ovpn     ./android/assets/广东深圳2.ovpn
\cp -rf xbml-yd-gd1.ovpn       ./android/assets/广东移动1.ovp
\cp -rf xbml-yd-gd2.ovpn       ./android/assets/广东移动2.ovpn
\cp -rf xbml-yd-gd3.ovpn       ./android/assets/广东移动3.ovpn
\cp -rf xbml-yd-gd4.ovpn       ./android/assets/广东移动4.ovpn
\cp -rf xbml-yd-gd5.ovpn       ./android/assets/广东移动5.ovpn
\cp -rf xbml-yd-gd6.ovpn       ./android/assets/广东移动6.ovpn
\cp -rf xbml-yd-gd7.ovpn       ./android/assets/广东移动7.ovpn
\cp -rf xbml-yd-cq.ovpn        ./android/assets/重庆移动.ovpn
\cp -rf xbml-yd-qgzq.ovpn      ./android/assets/全国证券.ovpn
\cp -rf xbml-yd-maom.ovpn      ./android/assets/广东茂名移动.ovpn
\cp -rf xbml-yd-gx.ovpn        ./android/assets/广西移动.ovpn
\cp -rf xbml-yd-ln.ovpn        ./android/assets/辽宁移动.ovpn
\cp -rf xbml-yd-sxi.ovpn       ./android/assets/山西移动.ovpn
\cp -rf xbml-yd-hebei.ovpn     ./android/assets/河北移动1.ovpn
\cp -rf xbml-yd-hebei2.ovpn    ./android/assets/河北移动2.ovpn
\cp -rf xbml-yd-sd.ovpn        ./android/assets/山东移动1.ovpn
\cp -rf xbml-yd-sd2.ovpn       ./android/assets/山东移动2.ovpn
\cp -rf xbml-yd-jx.ovpn        ./android/assets/江西移动1.ovpn
\cp -rf xbml-yd-jx2.ovpn       ./android/assets/江西移动2.ovpn
\cp -rf xbml-yd-sxjx.ovpn      ./android/assets/山西江西移动1.ovpn
\cp -rf xbml-yd-sx.ovpn        ./android/assets/陕西移动1.ovpn
\cp -rf xbml-yd-sx1.ovpn       ./android/assets/陕西移动2.ovpn
\cp -rf xbml-yd-sx3.ovpn       ./android/assets/陕西移动3.ovpn
\cp -rf xbml-yd-nx.ovpn        ./android/assets/宁夏移动.ovpn
\cp -rf xbml-yd-hun1.ovpn      ./android/assets/湖南移动.ovpn
\cp -rf xbml-yd-gz.ovpn        ./android/assets/贵州移动.ovpn
\cp -rf xbml-yd-sc1.ovpn       ./android/assets/四川移动1.ovpn
\cp -rf xbml-yd-sc2.ovpn       ./android/assets/四川移动2.ovpn
\cp -rf xbml-yd-ah.ovpn        ./android/assets/安徽移动.ovpn
\cp -rf xbml-yd-neimenggu.ovpn ./android/assets/内蒙古移动.ovpn
\cp -rf xbml-yd-migu1.ovpn     ./android/assets/全国移动1.ovpn
\cp -rf xbml-yd-migu.ovpn      ./android/assets/全国移动2.ovpn
\cp -rf xbml-yd-migu2.ovpn     ./android/assets/全国移动3.ovpn
\cp -rf xbml-yd-migu3.ovpn     ./android/assets/全国移动4.ovpn
\cp -rf xbml-yd-migu2-137.ovpn ./android/assets/全国移动5.ovpn
\cp -rf xbml-yd-migu-137.ovpn  ./android/assets/全国移动6.ovpn
\cp -rf xbml-yd-qg7.ovpn       ./android/assets/全国移动7.ovpn
\cp -rf xbml-yd-qg8.ovpn       ./android/assets/全国移动8.ovpn
\cp -rf xbml-yd-qg9.ovpn       ./android/assets/全国移动9.ovpn
\cp -rf xbml-yd-qgA.ovpn       ./android/assets/全国移动A.ovpn
\cp -rf xbml-lt-uac.ovpn       ./android/assets/UAC联通1.ovpn
\cp -rf xbml-lt-uac2.ovpn      ./android/assets/UAC联通2.ovpn
\cp -rf xbml-lt-uac3.ovpn      ./android/assets/UAC联通3.ovpn
\cp -rf xbml-lt-53.ovpn        ./android/assets/联通空中卡53.ovpn
\cp -rf xbml-lt-gd.ovpn        ./android/assets/联通广东.ovpn
\cp -rf xbml-lt-5.ovpn         ./android/assets/联通全国5.ovpn
\cp -rf xbml-lt-4.ovpn         ./android/assets/联通全国4.ovpn
\cp -rf xbml-lt-3.ovpn         ./android/assets/联通全国3.ovpn
\cp -rf xbml-lt-2.ovpn         ./android/assets/联通全国2.ovpn
\cp -rf xbml-lt-1.ovpn         ./android/assets/联通全国1.ovpn
\cp -rf xbml-lt-qglt.ovpn      ./android/assets/联通全国A.ovpn
\cp -rf xbml-lt-tj.ovpn        ./android/assets/联通天津.ovpn
\cp -rf xbml-lt-hb.ovpn        ./android/assets/湖北联通.ovpn
\cp -rf xbml-lt-bj.ovpn        ./android/assets/北京联通.ovpn
\cp -rf xbml-lt-qg1.ovpn       ./android/assets/联通全国.ovpn
\cp -rf xbml-lt-wap.ovpn       ./android/assets/联通WAP线路.ovpn
\cp -rf xbml-lt-dwk.ovpn       ./android/assets/联通大王卡线路①.ovpn
\cp -rf xbml-lt-dwk2.ovpn      ./android/assets/联通大王卡线路②.ovpn
\cp -rf xbml-dx-1.ovpn         ./android/assets/电信爱看.ovpn
\cp -rf xbml-dx-cq.ovpn        ./android/assets/重庆电信.ovpn
\cp -rf xbml-dx-qg1.ovpn       ./android/assets/全国电信.ovpn
\cp -rf xbml-dx-sjl.ovpn       ./android/assets/电信世纪龙.ovpn
\cp -rf xbml-dx-gd.ovpn        ./android/assets/电信常规-测试免广东.ovpn
\cp -rf xbml-dx-yinyue.ovpn    ./android/assets/全国电信音乐.ovpn
\cp -rf xbml-dx-llqg.ovpn      ./android/assets/广西山西电信.ovpn
yum install -y zip >/dev/null 2>&1
cd android && chmod -R 777 ./* && zip -r test.apk ./* >/dev/null 2>&1 && wget ${XBML}/signer.tar.gz >/dev/null 2>&1
tar zxf signer.tar.gz && java -jar signapk.jar testkey.x509.pem testkey.pk8 test.apk vpn.apk
\cp -rf vpn.apk /home/bendi.apk && cd /home && rm -rf android		
yum install -y java >/dev/null 2>&1
cd /home
rm -rf  android
mkdir   android
chmod 777 -R /home/android
cd /home/android
wget ${XBML}/apktool.jar >/dev/null 2>&1
wget ${XBML}/xbmlyd.apk >/dev/null 2>&1
java -jar apktool.jar d xbmlyd.apk
sed -i 's/www.xbml.vip/'${IP}:${port}'/g' /home/android/xbmlyd/smali/net/openvpn/openvpn/AutoScrollTextView.smali >/dev/null 2>&1
sed -i 's/www.xbml.vip/'${IP}:${port}'/g' /home/android/xbmlyd/smali/net/openvpn/openvpn/ChongzhiActivity.smali >/dev/null 2>&1
sed -i 's/www.xbml.vip/'${IP}:${port}'/g' '/home/android/xbmlyd/smali/net/openvpn/openvpn/DoActivity$3.smali' >/dev/null 2>&1
sed -i 's/www.xbml.vip/'${IP}:${port}'/g' '/home/android/xbmlyd/smali/com/mayor/prg/mst$2.smali' >/dev/null 2>&1
sed -i 's/www.xbml.vip/'${IP}:${port}'/g' /home/android/xbmlyd/smali/net/openvpn/openvpn/MainActivity.smali >/dev/null 2>&1
sed -i 's/www.xbml.vip/'${IP}:${port}'/g' /home/android/xbmlyd/smali/net/openvpn/openvpn/MainTabActivity.smali >/dev/null 2>&1
sed -i 's/www.xbml.vip/'${IP}:${port}'/g' /home/android/xbmlyd/smali/net/openvpn/openvpn/OpenVPNClient.smali >/dev/null 2>&1
sed -i 's/xbmlrdkey/'$appkey'/g' '/home/android/xbmlyd/smali/com/mayor/prg/mst$2.smali' >/dev/null 2>&1
sed -i 's/xbmlrdkey/'$appkey'/g' /home/android/xbmlyd/smali/net/openvpn/openvpn/ChongzhiActivity.smali >/dev/null 2>&1
sed -i 's/xbmlrdkey/'$appkey'/g' '/home/android/xbmlyd/smali/net/openvpn/openvpn/DoActivity$3.smali' >/dev/null 2>&1
sed -i 's/xbmlrdkey/'$appkey'/g' /home/android/xbmlyd/smali/net/openvpn/openvpn/MainActivity.smali >/dev/null 2>&1
sed -i 's/xbmlrdkey/'$appkey'/g' /home/android/xbmlyd/smali/net/openvpn/openvpn/MainTabActivity.smali >/dev/null 2>&1
sed -i 's/xbmlrdkey/'$appkey'/g' /home/android/xbmlyd/smali/net/openvpn/openvpn/OpenVPNClient.smali >/dev/null 2>&1
sed -i 's/小白免流/'$app_name'/g' /home/android/xbmlyd/res/values/strings.xml >/dev/null 2>&1
sed -i 's/843491408/'$appqq'/g' /home/android/xbmlyd/res/values/strings.xml >/dev/null 2>&1
sudo chmod +x /home/android/apktool.jar
java -jar apktool.jar b xbmlyd >/dev/null 2>&1
cd /home/android/xbmlyd/dist
wget ${XBML}/signer.tar.gz >/dev/null 2>&1
tar zxf signer.tar.gz
java -jar signapk.jar testkey.x509.pem testkey.pk8 xbmlyd.apk xbmlydml.apk
\cp -rf /home/android/xbmlyd/dist/xbmlydml.apk /home/yunduan.apk
cd /home
rm -rf  android
mkdir android
chmod 777 -R /home/android
cd /home/android
wget ${XBML}/apktool.jar >/dev/null 2>&1
wget ${XBML}/xbmlv51.apk >/dev/null 2>&1
java -jar apktool.jar d xbmlv51.apk
sed -i 's/120.77.80.105:1234/'${IP}:${port}'/g' /home/android/xbmlv51/smali/net/openvpn/openvpn/base.smali >/dev/null 2>&1
sed -i 's/120.77.80.105:1234/'${IP}:${port}'/g' "/home/android/xbmlv51/smali/net/openvpn/openvpn/OpenVPNClient.smali" >/dev/null 2>&1
sed -i 's/120.77.80.105:1234/'${IP}:${port}'/g' "/home/android/xbmlv51/smali/net/openvpn/openvpn/OpenVPNClient\$10.smali" >/dev/null 2>&1
sed -i 's/120.77.80.105:1234/'${IP}:${port}'/g' "/home/android/xbmlv51/smali/net/openvpn/openvpn/OpenVPNClient\$11.smali" >/dev/null 2>&1
sed -i 's/120.77.80.105:1234/'${IP}:${port}'/g' "/home/android/xbmlv51/smali/net/openvpn/openvpn/OpenVPNClient\$13.smali" >/dev/null 2>&1
sed -i 's/120.77.80.105:1234/'${IP}:${port}'/g' "/home/android/xbmlv51/smali/net/openvpn/openvpn/Main2Activity\$MyListener\$1.smali" >/dev/null 2>&1
sed -i 's/120.77.80.105:1234/'${IP}:${port}'/g' '/home/android/xbmlv51/smali/net/openvpn/openvpn/Main2Activity$MyListener.smali' >/dev/null 2>&1
sed -i 's/120.77.80.105:1234/'${IP}:${port}'/g' '/home/android/xbmlv51/smali/net/openvpn/openvpn/MainActivity.smali' >/dev/null 2>&1
sed -i 's/120.77.80.105:1234/'${IP}:${port}'/g' '/home/android/xbmlv51/smali/net/openvpn/openvpn/update$myClick$1.smali' >/dev/null 2>&1
sed -i 's/120.77.80.105:1234/'${IP}:${port}'/g' '/home/android/xbmlv51/smali/net/openvpn/openvpn/AutoScrollTextView.smali' >/dev/null 2>&1
sed -i 's/120.77.80.105:1234/'${IP}:${port}'/g' '/home/android/xbmlv51/smali/net/openvpn/openvpn/AutoScrollTextView1.smali' >/dev/null 2>&1
sed -i 's/120.77.80.105:1234/'${IP}:${port}'/g' '/home/android/xbmlv51/smali/net/openvpn/openvpn/splash$1$1.smali' >/dev/null 2>&1
sed -i 's/120.77.80.105:1234/'${IP}:${port}'/g' '/home/android/xbmlv51/smali/net/openvpn/openvpn/splash$2.smali' >/dev/null 2>&1
sed -i 's/小白免流/'$llwsappname'/g' "/home/android/xbmlv51/res/values/strings.xml" >/dev/null 2>&1
sudo chmod +x /home/android/apktool.jar
java -jar apktool.jar b xbmlv51 >/dev/null 2>&1
cd /home/android/xbmlv51/dist
wget ${XBML}/signer.tar.gz >/dev/null 2>&1
tar zxf signer.tar.gz
java -jar signapk.jar testkey.x509.pem testkey.pk8 xbmlv51.apk xbmlv51ml.apk
\cp -rf /home/android/xbmlv51/dist/xbmlv51ml.apk /home/weishi.apk
cd /home
rm -rf  android
mkdir android
chmod 777 -R /home/android
cd /home/android
wget ${XBML}/apktool.jar >/dev/null 2>&1
wget ${XBML}/xbmlv52.apk >/dev/null 2>&1
java -jar apktool.jar d xbmlv52.apk
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' /home/android/xbmlv52/smali/net/openvpn/openvpn/base.smali >/dev/null 2>&1
sed -i 's/APP_KEY_CODE/'${app_key}'/g' /home/android/xbmlv52/smali/net/openvpn/openvpn/base.smali >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' "/home/android/xbmlv52/smali/net/openvpn/openvpn/OpenVPNClient.smali" >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' "/home/android/xbmlv52/smali/net/openvpn/openvpn/OpenVPNClient\$10.smali" >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' "/home/android/xbmlv52/smali/net/openvpn/openvpn/OpenVPNClient\$11.smali" >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' "/home/android/xbmlv52/smali/net/openvpn/openvpn/OpenVPNClient\$13.smali" >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' "/home/android/xbmlv52/smali/net/openvpn/openvpn/Main2Activity\$MyListener\$1.smali" >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' '/home/android/xbmlv52/smali/net/openvpn/openvpn/Main2Activity$MyListener.smali' >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' '/home/android/xbmlv52/smali/net/openvpn/openvpn/MainActivity.smali' >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' '/home/android/xbmlv52/smali/net/openvpn/openvpn/update$myClick$1.smali' >/dev/null 2>&1
sed -i 's/云流量/'$llwsappname'/g' "/home/android/xbmlv52/res/values/strings.xml" >/dev/null 2>&1
sudo chmod +x /home/android/apktool.jar
java -jar apktool.jar b xbmlv52 >/dev/null 2>&1
cd /home/android/xbmlv52/dist
wget ${XBML}/signer.tar.gz >/dev/null 2>&1
tar zxf signer.tar.gz
java -jar signapk.jar testkey.x509.pem testkey.pk8 xbmlv52.apk xbmlv52ml.apk
\cp -rf /home/android/xbmlv52/dist/xbmlv52ml.apk /home/weishi1.apk
cd /home
rm -rf  android
mkdir android
chmod 777 -R /home/android
cd /home/android
wget ${XBML}/apktool.jar >/dev/null 2>&1
wget ${XBML}/xbmlv53.apk >/dev/null 2>&1
java -jar apktool.jar d xbmlv53.apk

sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' /home/android/xbmlv53/smali/net/openvpn/openvpn/base.smali >/dev/null 2>&1
sed -i 's/APP_KEY_CODE/'${app_key}'/g' /home/android/xbmlv53/smali/net/openvpn/openvpn/base.smali >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' "/home/android/xbmlv53/smali/net/openvpn/openvpn/OpenVPNClient.smali" >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' "/home/android/xbmlv53/smali/net/openvpn/openvpn/OpenVPNClient\$10.smali" >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' "/home/android/xbmlv53/smali/net/openvpn/openvpn/OpenVPNClient\$11.smali" >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' "/home/android/xbmlv53/smali/net/openvpn/openvpn/OpenVPNClient\$13.smali" >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' "/home/android/xbmlv53/smali/net/openvpn/openvpn/Main2Activity\$MyListener\$1.smali" >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' '/home/android/xbmlv53/smali/net/openvpn/openvpn/Main2Activity$MyListener.smali' >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' '/home/android/xbmlv53/smali/net/openvpn/openvpn/MainActivity.smali' >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' '/home/android/xbmlv53/smali/net/openvpn/openvpn/update$myClick$1.smali' >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' '/home/android/xbmlv53/smali/net/openvpn/openvpn/AutoScrollTextView.smali' >/dev/null 2>&1
sed -i 's/xbws.xbml.vip:1314/'${IP}:${port}'/g' '/home/android/xbmlv53/smali/net/openvpn/openvpn/AutoScrollTextViews.smali' >/dev/null 2>&1
sed -i 's/云流量/'$llwsappname'/g' "/home/android/xbmlv53/res/values/strings.xml" >/dev/null 2>&1

sudo chmod +x /home/android/apktool.jar
java -jar apktool.jar b xbmlv53 >/dev/null 2>&1
cd /home/android/xbmlv53/dist
wget ${XBML}/signer.tar.gz >/dev/null 2>&1
tar zxf signer.tar.gz
java -jar signapk.jar testkey.x509.pem testkey.pk8 xbmlv53.apk xbmlv53ml.apk
\cp -rf /home/android/xbmlv53/dist/xbmlv53ml.apk /home/weishi2.apk
rm -rf /home/scapp            >/dev/null 2>&1
rm -rf /root/scapp            >/dev/null 2>&1